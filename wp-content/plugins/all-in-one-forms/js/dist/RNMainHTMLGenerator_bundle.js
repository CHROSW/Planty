rndefine("#RNMainHTMLGenerator",["exports","#RNMainCore/EventManager","#RNMainFormBuilderCore/FixedValuesDictionary","lit"],(function(e,t,n,r){"use strict";class l{constructor(e,t={}){this.FormBuilder=e,this.Options=t}ParseContent(e,t,l=[]){var a,i;if(null==t)return null;for(let o of t)switch(o.type){case"paragraph":let t=this.CreateAndAppend(e,"p");null!=(null==o||null===(a=o.attrs)||void 0===a?void 0:a.align)&&(t.style.textAlign=o.attrs.align),null==o.content&&t.appendChild(document.createElement("br")),this.ParseContent(t,o.content,l);break;case"text":this.ParseText(e,o);break;case"horizontal_rule":this.CreateAndAppend(e,"hr");break;case"heading":let d=o.attrs.level,p=this.CreateAndAppend(e,"h"+d);null!=(null==o||null===(i=o.attrs)||void 0===i?void 0:i.align)&&(p.style.textAlign=o.attrs.align),this.ParseContent(p,o.content,l);break;case"blockquote":let c=this.CreateAndAppend(e,"blockQuote");this.ParseContent(c,o.content,l);break;case"bullet_list":let u=this.CreateAndAppend(e,"ul");this.ParseContent(u,o.content,l);break;case"ordered_list":let h=this.CreateAndAppend(e,"ol");this.ParseContent(h,o.content,l);break;case"list_item":let b=this.CreateAndAppend(e,"li");this.ParseContent(b,o.content,l);break;case"table":let C=this.CreateAndAppend(e,"table"),k=this.CreateAndAppend(C,"tbody");this.ParseContent(k,o.content,l);break;case"table_row":let m=this.CreateAndAppend(e,"tr");this.ParseContent(m,o.content,l);break;case"table_cell":let A=this.CreateAndAppend(e,"td");this.ParseContent(A,o.content,l);break;case"hard_break":this.CreateAndAppend(e,"br");break;case"field":let{id:f,type:y,options:v}=o.attrs,x="Unknown",g=document.createElement("div");if(g.style.display="inline-block","fixed"==y){let e=n.FixedValuesDictionary.find((e=>e.Id==f));null!=e&&(x=null!=e.Format?e.Format(v):e.Label,x="["+x+"]"),g.innerText=x}else{var s;let e=null===(s=this.FormBuilder)||void 0===s?void 0:s.GetFieldById(f,!0,!0);null!=e?(l.indexOf(e)<0&&l.push(e),null!=this.Options.FieldFormatter?x=this.Options.FieldFormatter(e):null!=e&&(x=e.GetHtml(),"string"==typeof x?g.innerText=x:g.innerHTML=r.renderInline(x,!0).innerHTML)):g.innerText=x}null!=o.marks&&(g=this.ApplyMarks(g,o.marks)),e.appendChild(g);break;default:if(null!=this.Options.NodeFormatter){let t=this.Options.NodeFormatter(o);null!=t&&e.appendChild(t);continue}console.error("Unknown type ",o)}return{Code:e,Fields:l}}CreateAndAppend(e,t){let n=document.createElement(t);return e.appendChild(n),n}ParseText(e,t){if(null==t.marks||0==t.marks.length){let n=document.createTextNode(t.text);return void e.appendChild(n)}let n=document.createElement("span");n.innerText=t.text,n=this.ApplyMarks(n,t.marks),e.appendChild(n)}ApplyMarks(e,t){for(let n of t)switch(n.type){case"strong":e.style.fontWeight="bold";break;case"em":e.style.fontStyle="italic";break;case"link":let t=document.createElement("a");t.href=n.attrs.href,t.target=n.attrs.target,t.appendChild(e),e=t;break;case"color":e.style.color=n.attrs.color;break;default:console.error("Undefined mark",n)}return e}}t.EventManager.Subscribe("GetHTML",(e=>{var t,n;let r=new l(e.FormBuilder,null!==(t=e.Options)&&void 0!==t?t:{}),a=document.createElement("div");return a.classList.add("rnHTML"),r.ParseContent(a,null===(n=e.HTML)||void 0===n?void 0:n.content)})),e.HTMLGenerator=l,Object.defineProperty(e,"__esModule",{value:!0})}));
